define(['uiComponent','jquery','mage/url','mage/translate',],function(Component,$,url){'use strict';return Component.extend({initialize:function(config,node){$('form#form-validate .invoice-form-action button').on('click',function(event){event.preventDefault();if($('form#form-validate').validation()&&$('form#form-validate').validation('isValid')){let linkUrl,order_id,form_key,cip,company,firstname,lastname,email,street,city,country_id,region_id,postcode,telephone,distinctBilling,invoiceMessage;order_id=config.order_id;form_key=$('form#form-validate input[name=form_key]').val();cip=$('form#form-validate #cip').val();company=$('form#form-validate #company').val();firstname=$('form#form-validate #firstname').val();lastname=$('form#form-validate #lastname').val();email=$('form#form-validate #email_address').val();city=$('form#form-validate #city').val();country_id=$('form#form-validate #country').val();region_id=$('form#form-validate #region_id').val();postcode=$('form#form-validate #zip').val();telephone=$('form#form-validate #telephone').val();distinctBilling=$('form#form-validate #distinct_billing').prop("checked")?1:0;linkUrl=url.build('invoice/index/post');street=[];$("form#form-validate input[name='street[]']").each(function(){street.push($(this).val());});invoiceMessage=$('.invoice-message');let userData={order_id:order_id,form_key:form_key,cip:cip,company:company,firstname:firstname,lastname:lastname,email:email,street:street,city:city,country_id:country_id,region_id:region_id,postcode:postcode,telephone:telephone,distinct_billing:distinctBilling};let request;request=$.ajax({type:'POST',url:linkUrl,data:userData,});request.done(function(data){invoiceMessage.removeClass('error').addClass('success');invoiceMessage.text($.mage.__('Successful request. You will receive the invoice shortly in your mail.'));});request.fail(function(data){invoiceMessage.removeClass('success').addClass('error');invoiceMessage.text($.mage.__('Sorry an error occurred . Try again later.'));});}
return false;});}});});